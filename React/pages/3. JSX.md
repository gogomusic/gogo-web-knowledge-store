## JSX åŸºæœ¬ä»‹ç»

### ç›®æ ‡

äº†è§£ JSX çš„å®šä¹‰å’Œä½¿ç”¨ï¼Œäº†è§£å®ƒçš„å·¥ä½œè¿‡ç¨‹ã€‚

### ä¸ºä»€ä¹ˆè¦æœ‰ JSX

`React.createElement()` åˆ›å»º React å…ƒç´ çš„é—®é¢˜ï¼šç¹ç/ä¸ç®€æ´ï¼›ä¸ç›´è§‚ï¼Œæ— æ³•ä¸€çœ¼çœ‹å‡ºæ‰€æè¿°çš„ç»“æ„ï¼›ä»£ç ä¸å®¹æ˜“ç»´æŠ¤ï¼

React.createElement(

 Â  Â 'div',

 Â   { className: 'wrap' },

 Â  Â React.createElement('ul', null, React.createElement('li', null, 'React'), React.createElement('li', null, 'Vue'), React.createElement('li', null, 'Angular'))

)

å¯¹æ¯”ä¸‹é¢ JSX çš„å†™æ³•

<div class="wrap">
 Â  Â <ul>
 Â  Â  Â  Â <li>React</li>
 Â  Â  Â  Â <li>Vue</li>
 Â  Â  Â  Â <li>Angular</li>
 Â  Â </ul>
</div>

### JSX æ˜¯ä»€ä¹ˆ

JSX æ˜¯ JavaScript XML çš„ç®€å†™ï¼Œè¡¨ç¤ºå¯ä»¥åœ¨ JavaScript ä»£ç ä¸­å†™ XMLï¼ˆHTMLï¼‰æ ¼å¼çš„ä»£ç ã€‚

ä¼˜åŠ¿ï¼šå£°æ˜å¼è¯­æ³•æ›´åŠ ç›´è§‚ï¼Œä¸ HTML ç»“æ„ç›¸åŒï¼Œé™ä½äº†å­¦ä¹ æˆæœ¬ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ï¼ŒJSX æ˜¯ React çš„æ ¸å¿ƒä¹‹ä¸€ã€‚

### JSX åŸºæœ¬ä½¿ç”¨

1. ä½¿ç”¨ JSX åˆ›å»º React å…ƒç´ 
```jsx
const title = <h1>Hello JSX</h1>
```

2. ä½¿ç”¨ `ReactDOM.render()` æ–¹æ³•æ¸²æŸ“ React å…ƒç´ åˆ°é¡µé¢ä¸­

```jsx
ReactDOM.render(title, document.querySelector('#root'))
```

### JSX æ˜¯å¦‚ä½•å·¥ä½œçš„

ğŸ¤” æ¢å¥è¯è¯´ï¼ŒJSX å¹¶ä¸æ˜¯æ ‡å‡†çš„ ECMAScript è¯­æ³•ï¼Œä¸ºä»€ä¹ˆ React è„šæ‰‹æ¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ JSX å‘¢ï¼Ÿ

- JSX éœ€è¦ä½¿ç”¨ Babel ç¼–è¯‘æˆ `React.createElement()` çš„å½¢å¼ï¼Œç„¶åé…åˆ React æ‰èƒ½åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œè€Œ `create-react-app` è„šæ‰‹æ¶ä¸­å·²ç»å†…ç½®äº† Babel åŠç›¸å…³é…ç½®ã€‚
- ç¼–è¯‘ JSX è¯­æ³•çš„åŒ…ä¸ºï¼š[@babel/preset-react](https://www.npmjs.com/package/@babel/preset-react)ï¼Œ[åœ¨çº¿ä½“éªŒ](https://www.babeljs.cn/repl#?browsers=defaults%2C%20not%20ie%2011%2C%20not%20ie_mob%2011&build=&builtIns=false&corejs=3.6&spec=false&loose=false&code_lz=DwCwjAfAEgpgNnA9gAgFIGUAawD04JA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=env%2Creact%2Cstage-2&prettier=false&targets=&version=7.16.2&externalPlugins=&assumptions={})ã€‚

## JSX æ³¨æ„ç‚¹

### å†…å®¹

```jsx
const r = (
 Â  Â <div className='wrap'>
 Â  Â  Â  Â <h1>Hello World</h1>
 Â  Â  Â  Â <p>React</p>
 Â  Â </div>
)
```

1. å¿…é¡»æœ‰ 1 ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæˆ–è€…è™šæ‹Ÿæ ¹èŠ‚ç‚¹ `<></>`ã€`<React.Fragment></React.Fragment>`ã€‚
2. å±æ€§åä¸€èˆ¬æ˜¯é©¼å³°çš„å†™æ³•ä¸”ä¸èƒ½æ˜¯ JS ä¸­çš„å…³é”®å­—ï¼Œä¾‹å¦‚ class æ”¹æˆ classNameï¼Œlabel çš„ for å±æ€§æ”¹ä¸º `htmlFor`ï¼Œcolspan æ”¹ä¸º `colSpan`ã€‚
3. å…ƒç´ è‹¥æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨å•æ ‡ç­¾ï¼Œä½†ä¸€å®šè¦é—­åˆï¼Œä¾‹å¦‚ `<span/>`ã€‚
4. `React@16.14` ä¹‹å‰éœ€è¦å…ˆå¼•å…¥ React æ‰èƒ½ä½¿ç”¨ JSXï¼ˆè¿™ä¸ªä¹Ÿå¥½ç†è§£ï¼Œå› ä¸º JSX æœ€åè¿˜æ˜¯è¦è¢«è½¬æˆ `React.createElement()` çš„å½¢å¼ï¼‰ã€‚
5. æ¢è¡Œå»ºè®®ä½¿ç”¨ `()` è¿›è¡ŒåŒ…è£¹ï¼Œé˜²æ­¢æ¢è¡Œçš„æ—¶å€™ [è‡ªåŠ¨æ’å…¥åˆ†å·](https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion-asi) çš„ Bugã€‚

![img](assets/ifer_bug.png)

## ä½¿ç”¨è¡¨è¾¾å¼

### ç›®æ ‡

æŒæ¡åœ¨ JSX ä¸­ä½¿ç”¨è¡¨è¾¾å¼ã€‚

### å†…å®¹

**å•å¤§æ‹¬å·**ä¸­å¯ä»¥ä½¿ç”¨ä»»æ„çš„è¡¨è¾¾å¼ï¼ˆå¯ä»¥äº§ç”Ÿç»“æœçš„å¼å­ï¼‰ã€‚

- æ™®é€šçš„ç®€å•æ•°æ®ç±»å‹ã€‚

```jsx
const name = 'zs'
const age = 18
const title = (
    <h1>
        å§“åï¼š{name}, å¹´é¾„ï¼š{age}
    </h1>
)
```

- å¯¹è±¡ä¸­çš„å±æ€§ã€‚

```jsx
const car = {
    brand: 'ç›èæ‹‰è’‚',
}
const title = <h1>æ±½è½¦ï¼š{car.brand}</h1>
```

- æ•°ç»„ä¸­çš„æŸä¸€é¡¹ç”šè‡³æ•´ä¸ªæ•°ç»„ã€‚

```jsx
const friends = ['å¼ ä¸‰', 'æå››']
const title = <h1>æ±½è½¦ï¼š{friends}</h1>
```

- å¯ä»¥è°ƒç”¨æ–¹æ³•ã€‚

```jsx
function sayHi() {
    return 'ä½ å¥½'
}
const title = <h1>å§“åï¼š{sayHi()}</h1>
```

### æ³¨æ„

- JS å¯¹è±¡è™½ç„¶ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥åµŒå¥—åœ¨ `{}` ä¸­ï¼Œä¸€èˆ¬åªä¼šå‡ºç°åœ¨ style å±æ€§ä¸­ã€‚
- JSX æœ¬èº«ä¹Ÿæ˜¯è¡¨è¾¾å¼ã€‚

```jsx
const span = <span>æˆ‘æ˜¯ä¸€ä¸ªspan</span>
const title = <h1>ç›’å­{span}</h1>
```

### å°ç»“

- JSX ä¸­å¯ä»¥åŒ…å«ä»»æ„çš„è¡¨è¾¾å¼ï¼ˆé™¤äº†å¯¹è±¡ï¼‰ã€‚
- JSX ä¸­ä¸èƒ½æ”¾è¯­å¥ï¼Œä¾‹å¦‚ `if`ã€`switch`ã€`for`ã€`while` ç­‰ã€‚

## æ¡ä»¶æ¸²æŸ“

### ç›®æ ‡

æŒæ¡æ¡ä»¶æ¸²æŸ“çš„å†™æ³•ã€‚

### å†…å®¹

ğŸ“ éœ€æ±‚ï¼šisLoading æ˜¯ trueï¼Œæ˜¾ç¤ºâ€œåŠ è½½ä¸­â€¦â€ï¼Œå¦åˆ™æ˜¾ç¤ºâ€œåŠ è½½å®Œæ¯•ï¼â€ã€‚

```js
import ReactDOM from 'react-dom'

const isLoading = true

const loadData = () => {
    if (isLoading) {
        return <h2>æ•°æ®åŠ è½½ä¸­ï¼Œè¯·ç¨å...</h2>
    }
    return <h2>æ•°æ®åŠ è½½å®Œæˆï¼Œæ­¤å¤„æ˜¾ç¤ºäº†åŠ è½½åçš„æ•°æ®</h2>
}

ReactDOM.render(loadData(), document.querySelector('#root'))
```

ä¸‰å…ƒè¡¨è¾¾å¼çš„å†™æ³•å¦‚ä¸‹ã€‚

```js
const loadData = () => {
    return <h2>{isLoading ? 'æ•°æ®åŠ è½½ä¸­ï¼Œè¯·ç¨å...' : 'æ•°æ®åŠ è½½å®Œæˆï¼Œæ­¤å¤„æ˜¾ç¤ºäº†åŠ è½½åçš„æ•°æ®'}</h2>
}
```

## åˆ—è¡¨æ¸²æŸ“

### ç›®æ ‡

- èƒ½åœ¨ JSX ä¸­ä½¿ç”¨æ•°ç»„çš„ map æ–¹æ³•æ¥ç”Ÿæˆåˆ—è¡¨ç»“æ„ã€‚
- äº†è§£ key çš„ä½œç”¨ã€‚

### éœ€æ±‚

- åç«¯è¿”å›çš„æ•°æ®ã€‚

```jsx
const arr = [
    { id: 1, name: 'Vue' },
    { id: 2, name: 'React' },
    { id: 3, name: 'Angular' },
]
```

- æœŸæœ›å®ç°çš„æ•ˆæœã€‚

![img](assets/ifer_list_jsx.png)

### ä»£ç å®ç°

æ‰‹åŠ¨æ‹¼æ¥å¦‚ä¸‹ã€‚

```jsx
<ul>
    <li>{list[0].name}</li>
    <li>{list[1].name}</li>
    <li>{list[2].name}</li>
</ul>
```

ç®€åŒ–ä¸Šé¢çš„ä»£ç ï¼šå¯ä»¥ä½¿ç”¨ `map()` æ–¹æ³•æ¸²æŸ“ä¸€ç»„æ•°æ®ã€‚

```jsx
import ReactDOM from 'react-dom'

const list = [
    { id: 1, name: 'Vue' },
    { id: 2, name: 'React' },
    { id: 3, name: 'Angular' },
]

const arrJsx = list.map((item) => <li key={item.id}>{item.name}</li>)

const loadData = () => {
    return <ul>{arrJsx}</ul>
}

ReactDOM.render(loadData(), document.querySelector('#root'))
```

### å…³äº key

1. ç‰¹ç‚¹ï¼škey å€¼è¦ä¿è¯å”¯ä¸€ï¼Œå°½é‡é¿å…ä½¿ç”¨ç´¢å¼•å·ï¼Œkey åœ¨æœ€ç»ˆçš„ HTML ç»“æ„ä¸­æ˜¯çœ‹ä¸è§çš„ã€‚
2. åŠ åœ¨å“ªé‡Œï¼š`map()` éå†è°ï¼Œå°±æŠŠ key åŠ åœ¨è°ä¸Šã€‚
3. ä½œç”¨ï¼šReact å†…éƒ¨ç”¨æ¥è¿›è¡Œ**æ€§èƒ½ä¼˜åŒ–**æ—¶ä½¿ç”¨çš„ï¼Œkey åœ¨æœ€ç»ˆçš„ HTML ç»“æ„ä¸­æ˜¯çœ‹ä¸è§çš„ã€‚

## æ ·å¼å¤„ç†

### ç›®æ ‡

æŒæ¡ React ä¸­ä½¿ç”¨æ ·å¼çš„ä¸¤ç§æ–¹å¼ã€‚

### è¡Œå†…æ ·å¼

- è¯­æ³•

```jsx
<å…ƒç´  style={ {csså±æ€§1ï¼šå€¼1,csså±æ€§2ï¼šå€¼2} }></å…ƒç´ >
```

- éœ€æ±‚

![img](assets/react_style.png)

- ä»£ç 

```jsx
<div style={{ width: 200, height: 200, lineHeight: '200px', backgroundColor: 'black', color: 'white', textAlign: 'center', fontSize: 30 }}>React</div>
```

- æ³¨æ„ç‚¹

  aï¼Œä¸ºå•¥æœ‰ä¸¤ä¸ª `{{ }}`ï¼Œå¤–å±‚çš„ `{}` è¡¨ç¤ºè¦å¼€å§‹å†™ JS è¡¨è¾¾å¼äº†ï¼Œå†…å±‚çš„ `{}` è¡¨ç¤ºæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

  bï¼Œå±æ€§åæ˜¯å°é©¼å³°æ ¼å¼ï¼Œä¾‹å¦‚ `background-color` éœ€è¦å†™æˆ `backgroundColor`ã€‚

  cï¼Œå±æ€§å€¼æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚æœå•ä½æ˜¯ pxï¼Œå¯ä»¥ç®€å†™æˆæ•°å€¼ã€‚

### className

- ç”¨ `className` å®šä¹‰ç±»åã€‚
- åœ¨ `src` ç›®å½•ä¸­å‡†å¤‡ `index.css` æ–‡ä»¶ï¼Œç„¶ååœ¨ `index.js` æ–‡ä»¶ä¸­é€šè¿‡ `import './index.css'` å¼•å…¥æ–‡ä»¶ã€‚

```jsx
//index.css
.title {
    width: 200px;
    height: 200px;
    color: white;
    background-color: black;
}
//index.js
import './index.css';
<div className='title'>Hello React</div>
```
